<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

        <title>    MattMendonca | Performant, complex, scalable views.
</title>
        <link href='http://fonts.googleapis.com/css?family=Raleway:100,400,200,700|Crimson+Text:400,700,400italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/themes/mmcom/resources/css/styles.combined.css">
        <script src="/themes/mmcom/resources/js/vendor/modernizr.min.js"></script>
    </head>

    <body>
        <div class="banner">
            <div class="row show-for-small-only">
                <div class="small-2 columns menu-toggle-columns">
                    <h1 class="menu-toggle"><i class="fi-list"></i></h1>    
                </div>
                <div class="small-10 columns">
                    <a href="/">
                        <h3 class="logo">Matt Mendonca</h3>
                        <h3 class="tagline">[Web Developer]</h3>
                    </a>   
                </div>
            </div>
            <div class="show-for-medium-up">
                <a href="/">
                    <h3 class="logo">Matt Mendonca</h3>
                    <h3 class="tagline">[Web Developer]</h3>
                </a>
            </div>
        </div>

        <div class="row main">
            <div class="medium-3 columns mobile menu show-for-small-only">
                <ul>
                    <li class="home">
                        <h2>
                            <i class="fi-home"></i>
                            <a href="/">Home</a>
                        </h2>
                    </li>
                    <li class="code">
                        <h2>
                            <i class="fi-clipboard-notes"></i>
                            <a href="/code">Code</a>
                        </h2>
                    </li>
                </ul>
            </div>
            <div class="medium-3 columns menu show-for-medium-up">
                <ul>
                    <li class="home">
                        <h3>
                            <i class="fi-home"></i>
                            <a href="/">Home</a>
                        </h3>
                    </li>
                    <li class="code">
                        <h3>
                            <i class="fi-clipboard-notes"></i>
                            <a href="/code">Code</a>
                        </h3>
                    </li>
                </ul>
            </div>
            

            <div class="medium-9 columns content-container">
                <div class="content">
                    <h1 class="content-title">    Performant, complex, scalable views.
</h1>
                        <ul class="breadcrumbs">
        <li><a href="/">Home</a></li>
        <li><a href="/code">Code</a></li>
    </ul> 
    <h4>Sounds good, right?</h4>
<p>
    The Views module is stellar. It saves time, is easy to use, helps create complex db queries,
    and renders the results. However, every node field is a separate table, so getting a complete
    node with lots of fields means lots of joins. This means a slower, more memory hungry query. Add in 
    relational fields - like a term reference field - and the problem is compounded.
    Really, I've seen queries as bigger than this paragraph.
</p>
<p>
    Full disclosure, this only happens at large scale with complex data. Are you going to need my proposed solution
    running a blog? No. The new hot web app? Possibly. I digress... 
</p>
<p> 
    In the case of a massive view that is either too slow or exhausting all of your memory, you have two choices (<em>obviously</em>):
</p>
<ol style="margin-left: 3em;">
    <li>Improve the hardware.</li>
    <li>Improve the software.</li>
</ol>
<p>
    Now this wouldn't make for an interesting read if all I did was tell you to buy a better server. 
    Certainly not after all that build up. Instead I'm going to talk about my approach to the problem.
</p>
<p>
    In a nutshell, you set up a table in the database with the content you want to query, 
    and have a column for every field. You know what that means, no joins! This set up is good for
    data that <strong>does not change structure very often</strong>. Sounds asinine, I know, but it 
    works - well.
</p>
<p>
    Here is the outline:
</p>
<ul>
    <li>
        Use the data module to build your custom table - it provides built Views support. 
        <strong>This saves a lot of time</strong>.
    </li>
    <li>
        Create a custom module that has hooks for:
        <ul>
            <li>Node insert</li>
            <li>Node update</li>
            <li>Node delete</li>
        </ul>
    </li>
    <li>
        In your module's hooks, whenever a change is made to a node, save, update, or delete a copy of it in your table.
    </li>
</ul>
<p>
    Make sense? Probably not, try something along the lines of 
    <a href="https://gist.github.com/matt-mendonca/7521629" target="_blank">gist.github.com/matt-mendonca/7521629</a>
</p>
<script src="https://gist.github.com/matt-mendonca/7521629.js"></script>

 
                </div>
            </div>
        </div>

        <div class="footer">
            <ul class="social">
                <li>
                    <a href="https://twitter.com/mrmattmendonca" target="_blank">
                        <i class="fi-social-twitter"></i>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/matt-mendonca/" target="_blank">
                        <i class="fi-social-github"></i>
                    </a>
                </li>
                <li>
                    <a href="http://www.linkedin.com/in/matthewmendonca" target="_blank">
                        <i class="fi-social-linkedin"></i>
                    </a>
                </li>
            </ul>
        </div>
        <script src="/themes/mmcom/resources/js/scripts.combined.js"></script>
        <script>jQuery(document).foundation();</script>
    </body>
</html>